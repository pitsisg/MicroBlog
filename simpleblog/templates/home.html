{% extends 'base.html' %}

{% block content%}





<h1>List of Blogs</h1>
<ul>

{% for user in users %}
	<li>
	<a href ="{% url 'blogs' user.id %}">
	{{ user.first_name}} 
	{{ user.last_name}}</a>

{% endfor%}
</ul>
	<h1>Posts</h1>

<ul>

		 <form action = "{% url 'search' %}" method ="get">
        <input type="text" name ="search" placeholder="Search tag across all bloges" /> <button type = "submit">Search</button>
      </form>

{% for post in posts %}
	
		

		<li><a href="{% url 'article-detail' post.pk %}">{{ post.title}}</a> -
		<a href ="{% url 'blogs' post.author.id %}">{{ post.author.first_name}} 
		{{ post.author.last_name}}</a> -
		{{ post.post_date}}  <small>

		{% if user.is_authenticated %}
			{% if user.id == post.author.id %}
				- <a href ="{% url 'update_post' post.pk %}">(Edit)</a>
		   	 	- <a href ="{% url 'delete_post' post.pk %}">(Delete)</a> 
		    {% endif %}
		{% endif %}

		 <br/>

		{% if post.tags.all.count %}
		    <div class="tags">
		        <small>Tags: </small>
		        {% for tag in post.tags.all %}
		       		<a href="{% url 'tags' tag %}" class="mr-1 badge badge-info bg-dark">{{ tag }}</a>
		        {% endfor %}
		    </div>
		{% endif %}

		</small>
		{{ post.body|safe|slice:":200"}} </li>

{% endfor%}
</ul>


 {% endblock %}
